# Friday 2.0 - Environment Variables Template
# Story 1.12 - Configuration backup chiffré + sync PC
# IMPORTANT: Copier ce fichier vers .env et remplir les valeurs

# ============================================
# PostgreSQL Database
# ============================================
POSTGRES_DB=friday
POSTGRES_USER=friday
POSTGRES_PASSWORD=changeme_secure_password_here

# ============================================
# Redis
# ============================================
REDIS_PASSWORD=changeme_redis_password_here
REDIS_GATEWAY_PASSWORD=changeme_gw_password_here
REDIS_BOT_PASSWORD=changeme_bot_password_here
# REDIS_EMAILENGINE_PASSWORD retiré (D25: EmailEngine supprimé)
REDIS_EMAIL_PASSWORD=changeme_email_password_here
REDIS_ALERTING_PASSWORD=changeme_alerting_password_here
REDIS_METRICS_PASSWORD=changeme_metrics_password_here

# ============================================
# n8n Workflow Automation
# ============================================
N8N_HOST=n8n.friday.local
N8N_ENCRYPTION_KEY=changeme_32_chars_encryption_key_here

# ============================================
# API Security
# ============================================
API_TOKEN=changeme_api_token_here

# ============================================
# LLM Provider - Claude Sonnet 4.5 (D17)
# ============================================
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# ============================================
# Embeddings Provider - Voyage AI (Story 6.2)
# ============================================
# Voyage AI API Key - voyage-4-large (1024 dims, multilingual)
# Obtenir sur: https://www.voyageai.com/
# Plan: Pay-as-you-go (~$0.06/1M tokens batch API)
VOYAGE_API_KEY=your_voyage_api_key_here

# Provider configuration (extensible: voyage, openai, cohere, ollama)
EMBEDDING_PROVIDER=voyage
EMBEDDING_DIMENSIONS=1024

# ============================================
# Memorystore Provider (Story 6.3)
# ============================================
# Memorystore backend for knowledge graph
# Day 1: postgresql (Decision D19)
# Future options: graphiti (future, if mature ~august 2026), neo4j (future), qdrant (if >300k vectors)
MEMORYSTORE_PROVIDER=postgresql

# ============================================
# Telegram Bot (Story 1.9)
# ============================================
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_SUPERGROUP_ID=-1001234567890
OWNER_USER_ID=123456789

# Thread IDs des 5 topics Telegram
TOPIC_CHAT_PROACTIVE_ID=2
TOPIC_EMAIL_ID=3
TOPIC_ACTIONS_ID=4
TOPIC_SYSTEM_ID=5
TOPIC_METRICS_ID=6

# ============================================
# Backup & Encryption (Story 1.12)
# ============================================

# age Public Key - Utilisée pour chiffrer les backups sur VPS
# Générer avec: bash scripts/generate-age-keypair.sh
# Format: age1<base64> (62-64 caractères)
# ⚠️  Clé PUBLIQUE uniquement ici (la clé PRIVÉE reste sur PC)
AGE_PUBLIC_KEY=age1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Tailscale - Sync backups vers PC Mainteneur
# Hostname Tailscale du PC (voir: tailscale status)
TAILSCALE_PC_HOSTNAME=mainteneur-pc

# ============================================
# Email Provider (D25: IMAP Direct remplace EmailEngine)
# ============================================
EMAIL_PROVIDER=imap_direct

# ============================================
# Comptes IMAP Direct (D25 - 4 comptes)
# IMPORTANT: Credentials stockés dans .env.enc chiffré SOPS
# Ne PAS mettre de vrais credentials ici
# Format: IMAP_ACCOUNT_{ID}_{FIELD}
# ============================================

# Compte 1 - Cabinet SELARL (médical) - Gmail
IMAP_ACCOUNT_MEDICAL_EMAIL=your_medical@gmail.com
IMAP_ACCOUNT_MEDICAL_IMAP_HOST=imap.gmail.com
IMAP_ACCOUNT_MEDICAL_IMAP_PORT=993
IMAP_ACCOUNT_MEDICAL_IMAP_USER=your_medical@gmail.com
IMAP_ACCOUNT_MEDICAL_IMAP_PASSWORD=your_app_password_here
IMAP_ACCOUNT_MEDICAL_SMTP_HOST=smtp.gmail.com
IMAP_ACCOUNT_MEDICAL_SMTP_PORT=587
IMAP_ACCOUNT_MEDICAL_USE_IDLE=true

# Compte 2 - Faculté (enseignement) - Gmail/Zimbra
IMAP_ACCOUNT_FACULTY_EMAIL=your_faculty@university.fr
IMAP_ACCOUNT_FACULTY_IMAP_HOST=imap.gmail.com
IMAP_ACCOUNT_FACULTY_IMAP_PORT=993
IMAP_ACCOUNT_FACULTY_IMAP_USER=your_faculty@university.fr
IMAP_ACCOUNT_FACULTY_IMAP_PASSWORD=your_app_password_here
IMAP_ACCOUNT_FACULTY_SMTP_HOST=smtp.gmail.com
IMAP_ACCOUNT_FACULTY_SMTP_PORT=587
IMAP_ACCOUNT_FACULTY_USE_IDLE=true

# Compte 3 - Recherche (thèses) - ProtonMail Bridge
# NOTE: IDLE instable sur ProtonMail Bridge → polling
IMAP_ACCOUNT_RESEARCH_EMAIL=your_research@protonmail.com
IMAP_ACCOUNT_RESEARCH_IMAP_HOST=127.0.0.1
IMAP_ACCOUNT_RESEARCH_IMAP_PORT=1143
IMAP_ACCOUNT_RESEARCH_IMAP_USER=your_research@protonmail.com
IMAP_ACCOUNT_RESEARCH_IMAP_PASSWORD=your_bridge_password_here
IMAP_ACCOUNT_RESEARCH_SMTP_HOST=127.0.0.1
IMAP_ACCOUNT_RESEARCH_SMTP_PORT=1025
IMAP_ACCOUNT_RESEARCH_USE_IDLE=false

# Compte 4 - Personnel - Gmail
IMAP_ACCOUNT_PERSONAL_EMAIL=your_personal@gmail.com
IMAP_ACCOUNT_PERSONAL_IMAP_HOST=imap.gmail.com
IMAP_ACCOUNT_PERSONAL_IMAP_PORT=993
IMAP_ACCOUNT_PERSONAL_IMAP_USER=your_personal@gmail.com
IMAP_ACCOUNT_PERSONAL_IMAP_PASSWORD=your_app_password_here
IMAP_ACCOUNT_PERSONAL_SMTP_HOST=smtp.gmail.com
IMAP_ACCOUNT_PERSONAL_SMTP_PORT=587
IMAP_ACCOUNT_PERSONAL_USE_IDLE=true

# ============================================
# IMAP Fetcher Config (D25)
# ============================================
IMAP_IDLE_RENEW_SECONDS=1500
IMAP_POLL_INTERVAL=60
IMAP_IDLE_SILENCE_TIMEOUT=1800
IMAP_SEEN_UIDS_TTL_DAYS=7

# ============================================
# Encryption Key - pgcrypto pour emails raw (D25: renommé depuis EMAILENGINE_ENCRYPTION_KEY)
# ============================================
# Clé pour chiffrer emails raw dans ingestion.emails_raw (pgp_sym_encrypt)
# Générer avec: openssl rand -hex 32
PGP_ENCRYPTION_KEY=changeme_pgp_encryption_key_32_chars_here

# ============================================
# Attachments Storage (Story 2.4)
# ============================================

# Chemin local pour stocker les pièces jointes extraites
# Phase 1 (Day 1): PC Mainteneur - créer le dossier manuellement
# Phase 2 (futur): Migration vers NAS Synology DS725+
# Windows: C:\Friday\attachments
# Linux: /home/user/friday/attachments
ATTACHMENTS_STORAGE_PATH=C:\Friday\attachments

# ============================================
# Monitoring & Logging
# ============================================
LOG_LEVEL=INFO
ENVIRONMENT=production

# ============================================
# NOTES IMPORTANTES
# ============================================
# 1. Ce fichier (.env.example) est un TEMPLATE - Ne pas y mettre de vraies valeurs
# 2. Copier vers .env et remplir avec vraies valeurs
# 3. .env est dans .gitignore - Ne JAMAIS commiter les vraies valeurs
# 4. Pour secrets en production : Utiliser .env.enc chiffré avec SOPS
#    Voir: docs/secrets-management.md
# 5. Clé privée age : Stocker sur PC uniquement
#    Voir: docs/age-private-key-storage-guide.md
