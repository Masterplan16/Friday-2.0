# Friday 2.0 - Environment Variables Template
# Copy this file to .env and fill in your actual values

# ============================================================================
# CRITICAL: Never commit .env to git - use SOPS for encrypted secrets
# ============================================================================

# ----------------------------------------------------------------------------
# PostgreSQL
# ----------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=friday_db
POSTGRES_USER=friday
POSTGRES_PASSWORD=changeme_strong_password_here

# ----------------------------------------------------------------------------
# Redis
# ----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=changeme_redis_password

# ----------------------------------------------------------------------------
# FastAPI Gateway
# ----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_PASSWORD=changeme_api_password  # Simple auth (Tailscale déjà sécurisé)
SECRET_KEY=changeme_secret_key_min_32_chars  # Pour JWT si ajouté plus tard

# ----------------------------------------------------------------------------
# Mistral API (Cloud)
# ----------------------------------------------------------------------------
MISTRAL_API_KEY=your_mistral_api_key_here
LLM_PROVIDER=mistral  # mistral, gemini, claude (via adaptateur)

# Models utilisés (référence)
# - mistral-nemo : Classification, tri, routage
# - mistral-medium : Génération, synthèse, brouillons
# - mistral-large : Raisonnement complexe, analyse contrats/thèses
# - mistral-embed : Embeddings vectoriels

# ----------------------------------------------------------------------------
# Ollama (Local VPS - Données sensibles)
# ----------------------------------------------------------------------------
OLLAMA_HOST=http://ollama:11434
OLLAMA_MODEL_NEMO=mistral-nemo:12b
OLLAMA_MODEL_MINISTRAL=ministral:3b

# ----------------------------------------------------------------------------
# Qdrant (Vectorstore)
# ----------------------------------------------------------------------------
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_API_KEY=  # Optionnel si réseau Docker interne

# ----------------------------------------------------------------------------
# Zep + Graphiti (Memory)
# ----------------------------------------------------------------------------
ZEP_API_URL=http://zep:8000
ZEP_API_KEY=your_zep_api_key_here
GRAPHITI_ENABLED=true  # false pour fallback Neo4j

# ----------------------------------------------------------------------------
# n8n (Workflows)
# ----------------------------------------------------------------------------
N8N_HOST=http://n8n:5678
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=changeme_n8n_password
N8N_ENCRYPTION_KEY=changeme_n8n_encryption_key_min_32_chars

# ----------------------------------------------------------------------------
# Telegram Bot
# ----------------------------------------------------------------------------
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_telegram_chat_id_here

# ----------------------------------------------------------------------------
# EmailEngine (IMAP)
# ----------------------------------------------------------------------------
EMAILENGINE_HOST=http://emailengine:3000
EMAILENGINE_TOKEN=your_emailengine_token_here

# Comptes email (4)
# Configuration via EmailEngine UI après démarrage

# ----------------------------------------------------------------------------
# Google APIs (Calendar, Docs, Drive)
# ----------------------------------------------------------------------------
GOOGLE_CLIENT_ID=your_google_client_id_here.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
GOOGLE_REDIRECT_URI=http://localhost:8000/auth/google/callback

# ----------------------------------------------------------------------------
# Deepgram (STT Fallback Cloud)
# ----------------------------------------------------------------------------
DEEPGRAM_API_KEY=your_deepgram_api_key_here

# ----------------------------------------------------------------------------
# APIs Médicales
# ----------------------------------------------------------------------------
BDPM_API_URL=https://base-donnees-publique.medicaments.gouv.fr/api/v1
VIDAL_API_KEY=your_vidal_api_key_here  # Si abonnement
ANTIBIOCLIC_API_URL=https://antibioclic.com/api  # Si API disponible

# ----------------------------------------------------------------------------
# APIs Juridiques
# ----------------------------------------------------------------------------
LEGIFRANCE_CLIENT_ID=your_legifrance_client_id_here
LEGIFRANCE_CLIENT_SECRET=your_legifrance_client_secret_here

# ----------------------------------------------------------------------------
# APIs Scientifiques
# ----------------------------------------------------------------------------
CROSSREF_EMAIL=your.email@example.com  # Politeness parameter
PUBMED_API_KEY=  # Optionnel (rate limit plus élevé si fourni)
SEMANTIC_SCHOLAR_API_KEY=  # Optionnel

# ----------------------------------------------------------------------------
# Tailscale
# ----------------------------------------------------------------------------
TAILSCALE_HOSTNAME=friday-vps
TAILSCALE_AUTH_KEY=tskey-auth-xxxxx  # Pour auto-join (optionnel)

# ----------------------------------------------------------------------------
# Syncthing (Sync VPS ↔ PC)
# ----------------------------------------------------------------------------
SYNCTHING_API_KEY=your_syncthing_api_key_here
SYNCTHING_DEVICE_ID_VPS=XXXXXXX-XXXXXXX-XXXXXXX-XXXXXXX-XXXXXXX-XXXXXXX-XXXXXXX-XXXXXXX
SYNCTHING_DEVICE_ID_PC=YYYYYYY-YYYYYYY-YYYYYYY-YYYYYYY-YYYYYYY-YYYYYYY-YYYYYYY-YYYYYYY

# ----------------------------------------------------------------------------
# Chiffrement (age/SOPS)
# ----------------------------------------------------------------------------
SOPS_AGE_KEY_FILE=/config/sops-key.txt
AGE_PUBLIC_KEY=age1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ----------------------------------------------------------------------------
# Presidio (Anonymisation RGPD)
# ----------------------------------------------------------------------------
PRESIDIO_ANALYZER_URL=http://presidio-analyzer:5002
PRESIDIO_ANONYMIZER_URL=http://presidio-anonymizer:5001

# ----------------------------------------------------------------------------
# Monitoring
# ----------------------------------------------------------------------------
RAM_THRESHOLD_PERCENT=90  # Alerte Telegram si dépassé

# ----------------------------------------------------------------------------
# Logging
# ----------------------------------------------------------------------------
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json ou text

# ----------------------------------------------------------------------------
# Environment
# ----------------------------------------------------------------------------
ENVIRONMENT=development  # development, production
DEBUG=false

# ----------------------------------------------------------------------------
# Backups
# ----------------------------------------------------------------------------
BACKUP_RETENTION_DAYS=7
BACKUP_PATH=/backups

# ----------------------------------------------------------------------------
# Rate Limiting (si extension famille future)
# ----------------------------------------------------------------------------
# RATE_LIMIT_ENABLED=false
# RATE_LIMIT_REQUESTS_PER_MINUTE=60

# ----------------------------------------------------------------------------
# Ollama RAM Management
# ----------------------------------------------------------------------------
OLLAMA_RAM_RESERVED_GB=4  # RAM réservée pour système (hors 16 Go total)

# ----------------------------------------------------------------------------
# Notifications
# ----------------------------------------------------------------------------
NTFY_TOPIC=friday-notifications  # Si ntfy utilisé en plus de Telegram
NTFY_SERVER=https://ntfy.sh

# ----------------------------------------------------------------------------
# Development
# ----------------------------------------------------------------------------
HOT_RELOAD=true  # Uvicorn reload en dev
PYTEST_ADDOPTS=-v --tb=short

# ============================================================================
# Notes
# ============================================================================
# 1. Utiliser SOPS pour chiffrer ce fichier avant commit : sops -e .env > .env.enc
# 2. Déchiffrer en production : sops -d .env.enc > .env
# 3. Budget estimé APIs cloud : 6-9€/mois Mistral + 3-5€/mois Deepgram
# 4. VPS OVH 16 Go : ~24€/mois
# 5. Total estimé : 35-41€/mois
