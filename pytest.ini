[pytest]
# Configuration pytest pour Friday 2.0

# pytest-asyncio : mode automatique (pas besoin de fixture event_loop)
asyncio_mode = auto

# Marqueurs de tests
markers =
    integration: Tests d'intégration nécessitant PostgreSQL réel (run with INTEGRATION_TESTS=1)
    unit: Tests unitaires avec mocks
    e2e: Tests end-to-end complets

# Options par défaut
addopts =
    -v
    --strict-markers
    --tb=short

# Patterns de découverte des tests
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Coverage
[coverage:run]
source = agents/src
omit =
    */tests/*
    */test_*.py
    */__pycache__/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False
